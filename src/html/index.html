<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swiper + GSAP slider</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css">
 <style>
  * { box-sizing: border-box; margin: 0; padding: 0 }
  body { font-family: Arial, sans-serif; background:#fff }
  .entert__body { max-width: 100%; padding: 20px }
  .swiper { width: 100%; overflow: visible; /* –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤–∏–¥–Ω–æ –±—ã–ª–æ —Ç–µ–Ω—å/–∫–∞—Ä—Ç–æ—á–∫—É */ }

  /* –¥–µ–ª–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π, –º–∞–∫—Å–∏–º—É–º 383px */
  :root { --card-max-w: 383px; --card-aspect: 247/383; } /* aspect ratio */
  .swiper-slide { width: auto; display:flex; justify-content:center; align-items:center; will-change: transform; }
  .entert__item-img {
    width: clamp(260px, 60vw, var(--card-max-w)); /* –∞–¥–∞–ø—Ç–∏–≤ */
    height: calc(clamp(260px, 60vw, var(--card-max-w)) * var(--card-aspect));
    border-radius: 10px;
    overflow: hidden;
    flex-shrink: 0;
  }
  .entert__item-img img { width:100%; height:100%; object-fit:cover; display:block; transform-origin:center center; }

  .swiper-button-prev, .swiper-button-next { color: #000; cursor:pointer; user-select:none }
  .swiper-pagination-bullet { background:#000; opacity:0.7 }
  .swiper-pagination-bullet-active { opacity:1; background:#007aff }

  /* –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞–¥–¥–∏–Ω–≥–æ–≤ */
  .entert__body--slider { 
  transition: padding 220ms ease; 
  overflow: hidden;
}
</style>

</head>
<body>
  <div class="entert__body">
    <div class="swiper entert__body--slider">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-1.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-2.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-3.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-4.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-1.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-2.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-3.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-4.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-1.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-2.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-3.png" alt=""></div>
        </div>
        <div class="swiper-slide">
          <div class="entert__item-img"><img src="./images/entert/entert-4.png" alt=""></div>
        </div>
      </div>

      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev entert-button-prev"></div>
      <div class="swiper-button-next entert-button-next"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>
 <script>
  // ---------------------------
// Global state
// ---------------------------
let isSliding = false;    // transition ongoing flag
let slideQueue = 0;       // queued slide actions count
let lastNav = null;       // last navigation params {dir, speed}

// ---------------------------
// Swiper init
// ---------------------------
const swiper = new Swiper('.entert__body--slider', {
  slidesPerView: 'auto',
  spaceBetween: 15,
  centeredSlides: false,
  centeredSlidesBounds: true,
  slidesOffsetBefore: 0,
  slidesOffsetAfter: 0,
  loop: false,
  centerInsufficientSlides: true,
  freeMode: {
    enabled: false,
    momentum: false,
    momentumBounce: false,
    sticky: true,
  },
  speed: 500,
  simulateTouch: true,
  watchOverflow: true,

  mousewheel: {
    forceToAxis: true,
    sensitivity: 1,
    releaseOnEdges: true
  },

  navigation: {
    nextEl: '.entert-button-next',
    prevEl: '.entert-button-prev'
  },
  pagination: {
    el: '.swiper-pagination',
    clickable: true
  },

  on: {
    init: function () {
      // ’∏’π ’¥’´ dynamic padding ’∞’°’∑’æ’°÷Ä’Ø ‚Äî ’©’∏’≤ ’Ω’¨’°’µ’§’•÷Ä’® ’∂’Ω’ø’•’∂ ’Ø’∏’∂’ø’•’µ’∂’•÷Ä’´ ’•’¶÷Ä’•÷Ä’´’∂
    },

    imagesReady: function () { /* optional */ },

    slideChange: function () {
      console.log("‘±’Ø’ø’´’æ ’´’∂’§’•÷Ñ’Ω’®’ù", this.realIndex);
      if (this.realIndex === 8) {
        console.log("‚úÖ ’Ä’°’Ω’°’∂÷Ñ ’•’¶÷Ä’°÷É’°’Ø’´’π ’Ω’¨’°’µ’§’´’∂");
      }
      if (this.realIndex === 3) {
        console.log("‚úÖ ’Ä’°’Ω’°’∂÷Ñ ’∞’•’ø ’£’°’¨’∏÷Ç ’Ω’°’∞’¥’°’∂’®");
      }
    },

    // ’•÷Ä’¢ transition ’Ω’Ø’Ω’æ’∏÷Ç’¥ ’ß
    slideChangeTransitionStart: function () {
      isSliding = true;
    },

    // ’•÷Ä’¢ transition ’°’æ’°÷Ä’ø’æ’∏÷Ç’¥ ’ß
    slideChangeTransitionEnd: function () {
      const swiper_wrapper = document.querySelector('.swiper-wrapper');
      const style = window.getComputedStyle(swiper_wrapper);
      const matrix = style.transform || style.webkitTransform;
      const slideWidth = swiper.slides[0] ? swiper.slides[0].offsetWidth : 0;

      // ’°’∫’°’∞’∏’æ ’Ø’•’ø’ù ’∂’∑’•’¨ ’∏÷Ä ’ø÷Ä’°’∂’Ω’µ’∏÷Ç’∑’∂ ’°’æ’°÷Ä’ø’æ’•÷Å
      isSliding = false;

      // ÷Ñ’∏ ’ø’°÷Ä÷Ö÷Ä’´’∂’°’Ø teleport/rewind ’Ø’°÷Ä’£’® (’©’∏÷Ç’µ’¨’°’ø÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’®’Ω’ø ÷Ö÷Ä’´’∂’°’Ø’´)
      // if (this.realIndex === 0 && this.previousIndex > 0) {
      //   console.log("‚û°Ô∏è ’Ä’•’ø ’£’°’¨’∏÷Ç ’Ω’°’∞’¥’°’∂’® ’∞’°’Ω’°’æ, ’ø’•’≤’°÷É’∏’≠’æ’∏÷Ç’¥ ’•’∂÷Ñ 4-÷Ä’§ ’Ω’¨’°’µ’§’´’∂ ’°’º’°’∂÷Å ’°’∂’´’¥’°÷Å’´’°’µ’´");
      //   // ’æ’•÷Ä’°÷Å’∂’•’¨ ’∞’•÷Ä’©’•÷Ä’®, ’∏÷Ä’∫’•’Ω’¶’´ ’°’∂’∞’°’¥’°’∫’°’ø’°’Ω’≠’°’∂ ’π’¥’∂’°’∂
      //   slideQueue = 0;
      //   swiper.slideTo(4, 0);
      // }

      // if (this.realIndex === 8) {
      //   console.log("‚û°Ô∏è ’Ä’°’Ω’°’∂÷Ñ ’æ’•÷Ä’ª’´’∂ ’Ω’¨’°’µ’§’´’∂, ’ø’•’≤’°÷É’∏’≠’æ’∏÷Ç’¥ ’•’∂÷Ñ 4-÷Ä’§ ’Ω’¨’°’µ’§’´’∂ ’°’º’°’∂÷Å ’°’∂’´’¥’°÷Å’´’°’µ’´");
      //   slideQueue = 0;
      //   swiper.slideTo(4, 0);
      // }

      // // matrix ’∞’°’ø’∏÷Ç’Ø ’£’´’∑’´’Ø ‚Äî ’∏÷Ä÷Ñ’°’∂’® ’∏÷Ç’¶’°’Æ ’ß, ’©’∏’≤ ’¨’´’∂’´
      // if (matrix.includes("-3389.54")) {
      //   swiper.setTranslate(-slideWidth * 4.47);
      // }

      // // ’•’©’• ’∞’•÷Ä’©’∏÷Ç’¥ ’§’•’º ’Ø’°’∂ slide-’•÷Ä ‚Äî ÷É’∏÷Ä’±’•’∂÷Ñ ’¥’•’Ø’® ’Ω’Ø’Ω’•’¨ ’∞’°’ª’∏÷Ä’§’® (÷É’∏÷Ñ÷Ä ’∏÷Ç’∑’°÷Å’∏÷Ç’¥’ù ’∏÷Ä’∫’•’Ω’¶’´ isSliding-’® ’Ø’°’µ’∏÷Ç’∂ ’©’∏’≤’∂’•’∂÷Ñ)
      // if (slideQueue > 0 && lastNav) {
      //   // ÷É’∏÷Ñ÷Ä setTimeout, ’∏÷Ä’∫’•’Ω’¶’´ isSliding ’∞’°’Ω÷Å’∂’´ false-’® ’∞’°’Ω’ø’°’ø’æ’•’¨
      //   setTimeout(() => processQueue(), 30);
      // }
    }
  }
});


let isTouching = false;

swiper.el.addEventListener('touchstart', () => {
  isTouching = true;
  swiper.params.freeMode.enabled = true;  // ‚úÖ ’¥’´’°÷Å’∂’∏÷Ç’¥ ’•’∂÷Ñ
});

swiper.el.addEventListener('touchend', () => {
  isTouching = false;
  swiper.params.freeMode.enabled = false; // üîá ’°’∂’ª’°’ø’∏÷Ç’¥ ’•’∂÷Ñ
});

swiper.el.addEventListener('wheel', (e) => {
  if (e.ctrlKey || Math.abs(e.deltaX) > 0) {
    swiper.params.freeMode.enabled = true;
    clearTimeout(swiper._freeModeTimeout);
    swiper._freeModeTimeout = setTimeout(() => {
      swiper.params.freeMode.enabled = false;
    }, 400); // 0.4 ’æ’°’µ÷Ä’Ø’µ’°’∂ ’∞’•’ø’∏ ’°’∂’ª’°’ø’∏÷Ç’¥ ’•’∂÷Ñ
  }
});
// ---------------------------
// Process queue ‚Äî ’Ø’ø’°÷Ä’´ 1 slide ’¥’´’°’∂’£’°’¥’´÷Å
// ---------------------------
function processQueue() {
  if (!lastNav) return;
  if (slideQueue <= 0) return;
  if (isSliding) return; // ’Ω’∫’°’Ω’∏÷Ç’¥ ’•’∂÷Ñ ’¥’´’∂’π÷á ’°’æ’°÷Ä’ø’æ’´ ’®’∂’©’°÷Å’∏’≤’®

  // ’æ’•÷Ä÷Å’∂’∏÷Ç’¥ ’•’∂÷Ñ ’¥’•’Ø ÷Ñ’°’µ’¨ (’°’º’°’ª’´’Ø’°)
  slideQueue = Math.max(0, slideQueue - 1);
  const { dir, speed } = lastNav;

  if (dir === 'next') {
    swiper.slideNext(speed);
  } else {
    swiper.slidePrev(speed);
  }
  // ’∞’°’ª’∏÷Ä’§ ÷Ñ’°’µ’¨’® ’Ø’™’°’¥’°’∂’´ slideChangeTransitionEnd ’´÷Å ’∞’•’ø’∏ (’©’æ’°÷Ä’Ø’•’¨’∏’æ processQueue)
}

// ---------------------------
// ’ç’ø’•’≤ ’°’¥’•’∂’°’æ’•÷Ä’ª’∏÷Ç’¥ ’¥’´’°÷Å’∂’•’¨ ’•’∂÷Ñ slideChangeTransitionStart/End ’∂’∏÷Ä’´÷Å,
// ’∏÷Ä’∫’•’Ω’¶’´ ’£÷Ä’°’æ’•’∂÷Ñ ÷Å’°’∂’Ø’°÷Å’°’Æ ’ø’•’≤’´÷Å ’Ø’°’ø’°÷Ä’æ’°’Æ slide-’∂’•÷Ä’®
// (’•’©’• ’∏÷Ç’¶’∏÷Ç’¥ ’•’Ω ’Ø’°÷Ä’∏’≤ ’ß’´÷Ä ’°’æ’•’¨’°÷Å’∂’•’¨ ’Ω’° ’æ’•÷Ä÷á’´ on ’ø’´÷Ä’∏÷Ç’µ’©’∏÷Ç’¥ ‚Äî ’°’º’Ø’° ’ß ’°’µ’∂’ø’•’≤ ’°÷Ä’§’•’∂)
// ---------------------------
swiper.on('slideChangeTransitionStart', () => { isSliding = true; });
swiper.on('slideChangeTransitionEnd', () => { isSliding = false; });


// ---------------------------
// "–¢–µ–º–ø –Ω–∞–∂–∞—Ç–∏–π" ’¨’∏’£’´’Ø’°’∂ (nav ’°÷Ä’°’£ multiple slide ÷Ñ’°’∑÷Ñ’∑’∏÷Ç’Ø’∂’•÷Ä’´’∂)
// ÷Ö’£’ø’°’£’∏÷Ä’Æ’∏÷Ç’¥ ’ß –æ—á–µ—Ä–µ–¥—å’ù ’∏÷Ä’∫’•’Ω’¶’´ ’¥’•’Æ ÷Ñ’°’∂’°’Ø’´ ’°÷Ä’°’£ ’Ω’•’≤’¥’∏÷Ç’¥’∂’•÷Ä’® ’∞’°’ª’∏÷Ä’§’æ’•’∂ ’∞’•÷Ä’©’∏’æ
// ---------------------------
(function tempoNav() {
  const nextBtn = document.querySelector('.entert-button-next');
  const prevBtn = document.querySelector('.entert-button-prev');
  let clickTimes = [];
  const WINDOW_MS = 800;

  function recordAndDecide() {
    const now = Date.now();
    clickTimes = clickTimes.filter(t => now - t < WINDOW_MS);
    clickTimes.push(now);
    const clicks = clickTimes.length;
    if (clicks >= 5) return {slides: Math.min(4, clicks - 1), speed: 180};
    if (clicks >= 3) return {slides: 2, speed: 260};
    if (clicks === 2) return {slides: 1, speed: 340};
    return {slides: 1, speed: 200};
  }

  function navHandler(dir) {
    const {slides, speed} = recordAndDecide();

    // ‘µ’©’• ’∞’´’¥’° ’¥’´ transition ’ß ’®’∂’©’°÷Å÷Ñ’´ ’¥’•’ª’ù ’∞’•÷Ä’©’∏’æ ’Ø’∏÷Ç’ø’°’Ø’•’∂÷Ñ
    lastNav = { dir, speed };

    // queue++ ’∞’°’¥’°’∫’°’ø’°’Ω’≠’°’∂ slides ÷Ñ’°’∂’°’Ø’∏’æ
    slideQueue += slides;

    // ’°’∂’¥’´’ª’°’∫’•’Ω ÷É’∏÷Ä’±’•’∂÷Ñ processQueue ’°’∂’•’¨’ù ’•’©’• ’∞’∂’°÷Ä’°’æ’∏÷Ä ’ß
    processQueue();
  }

  // if (nextBtn) {
  //   let nextHoldTimer = null, nextInterval = null;
  //   nextBtn.addEventListener('mousedown', () => {
  //     let holdCount = 0;
  //     // ’¥’´ ’Ø’°÷Ä’≥ single click behavior (’¥’´’∏÷Ç’©’µ’∏÷Ç’∂’® ’Ø’¨’´’∂’´ navHandler('next'))
  //     // ‘≤’°’µ÷Å ’•÷Ä’¢ ’¥’°’µ’∏÷Ç’Ω-’∫’°’∞’•’Ω ‚Äî ’Ω’Ø’Ω’æ’∏÷Ç’¥ ’ß interval
  //     nextHoldTimer = setTimeout(() => {
  //       nextInterval = setInterval(() => {
  //         navHandler('next');
  //         holdCount++;
  //       }, Math.max(80, 300 - holdCount * 20));
  //     }, 300);
  //   });
  //   nextBtn.addEventListener('mouseup', () => { clearTimeout(nextHoldTimer); clearInterval(nextInterval); });
  //   nextBtn.addEventListener('mouseleave', () => { clearTimeout(nextHoldTimer); clearInterval(nextInterval); });
  //   // ’Ω’∏’æ’∏÷Ä’°’Ø’°’∂ click
  //   nextBtn.addEventListener('click', (e) => { e.preventDefault(); navHandler('next'); });
  // }

  // if (prevBtn) {
  //   let prevHoldTimer = null, prevInterval = null;
  //   prevBtn.addEventListener('mousedown', () => {
  //     let holdCount = 0;
  //     prevHoldTimer = setTimeout(() => {
  //       prevInterval = setInterval(() => {
  //         navHandler('prev');
  //         holdCount++;
  //       }, Math.max(80, 300 - holdCount * 20));
  //     }, 300);
  //   });
  //   prevBtn.addEventListener('mouseup', () => { clearTimeout(prevHoldTimer); clearInterval(prevInterval); });
  //   prevBtn.addEventListener('mouseleave', () => { clearTimeout(prevHoldTimer); clearInterval(prevInterval); });
  //   prevBtn.addEventListener('click', (e) => { e.preventDefault(); navHandler('prev'); });
  // }
})();

</script>

</body>
</html>
